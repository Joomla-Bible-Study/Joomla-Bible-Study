<?xml version="1.0" encoding="utf-8"?>
<!-- $Id: default.xml tf 12-11-2007 $ -->
<metadata>
	<layout title="JBS_MNU_STUDIES_LIST_LAYOUT">
		<message>
			<![CDATA[JBS_MNU_STUDIES_LIST_LAYOUT_DESC]]>
		</message>
	</layout>
	<state>
		<name>JBS_MNU_STUDIES_LIST_LAYOUT</name>
		<params addpath="/components/com_biblestudy/elements">
			<param name="type" type="hidden" default="studieslist" />
			<param name="templatemenuid" type="templatemenuid" default="" label="JBS_MNU_SELECT_TEMPLATE" description="JBS_MNU_SELECT_TEMPLATE_DESC" />
   <param name="mteacher_id"
           type="sqlmultilistx"
           sql="SELECT * FROM #__bsms_teachers WHERE published = &#39;1&#39;"
           key_field="id"
           value_field="teachername"
           default="-1"
           multiple="multiple"
           size="10"
           label="JBS_CMN_FILTERS_TEACHER"
           description="JBS_CMN_FILTERS_TEACHER_DESC">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </param>
    <param name="mseries_id"
           type="sqlmultilistx"
           sql="SELECT #__bsms_series.id AS sid, #__bsms_series.series_text, #__bsms_series.published AS srpub, #__bsms_studies.series_id, #__bsms_studies.published AS spub FROM #__bsms_series LEFT JOIN #__bsms_studies ON ( #__bsms_studies.id = #__bsms_series.id ) WHERE #__bsms_series.published = &#39;1&#39;"
           key_field="sid"
           value_field="series_text"
           default="-1"
           multiple="multiple"
           size="10"
           label="JBS_CMN_FILTERS_SERIES"
           description="JBS_CMN_FILTERS_SERIES_DESC">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </param>
    <param name="mbooknumber"
           type="sqlmultilistx"
           sql="SELECT DISTINCT #__bsms_studies.booknumber AS sbn, #__bsms_studies.published AS spub, #__bsms_books.booknumber AS bbn, #__bsms_books.bookname FROM #__bsms_books LEFT JOIN #__bsms_studies ON (#__bsms_studies.booknumber = #__bsms_books.booknumber) WHERE #__bsms_studies.published = &#39;1&#39; ORDER BY #__bsms_books.booknumber ASC"
           key_field="sbn"
           value_field="bookname"
           default="-1"
           multiple="multiple"
           size="10"
           label="JBS_CMN_FILTERS_BOOKS"
           description="JBS_CMN_FILTERS_BOOKS_DESC">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </param>
    <param name="mtopic_id"
           type="sqlmultilistx"
           sql="SELECT DISTINCT #__bsms_topics.id AS tid, #__bsms_topics.topic_text, #__bsms_studies.topics_id, #__bsms_studytopics.topic_id, #__bsms_studytopics.study_id FROM #__bsms_studies LEFT JOIN #__bsms_topics ON (#__bsms_topics.id = #__bsms_studies.topics_id) LEFT JOIN #__bsms_studytopics ON (#__bsms_studytopics.id = #__bsms_studies.topics_id)"
           key_field="tid"
           value_field="topic_text"
           default="-1"
           multiple="multiple"
           size="10"
           label="JBS_CMN_FILTERS_TOPICS"
           description="JBS_CMN_FILTERS_TOPICS_DESC">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </param>
    <param name="mmessagetype"
           type="sqlmultilistx"
           sql="SELECT * FROM #__bsms_message_type WHERE published = &#39;1&#39;"
           key_field="id"
           value_field="message_type"
           default="-1"
           multiple="multiple"
           size="5"
           label="JBS_CMN_FILTERS_MESSAGE_TYPES"
           description="JBS_CMN_FILTERS_MESSAGE_TYPES_DESC">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </param>
    <param name="mlocations"
           type="sqlmultilistx"
           sql="SELECT * FROM #__bsms_locations WHERE published = &#39;1&#39;"
           key_field="id"
           value_field="location_text"
           default="-1"
           multiple="multiple"
           size="5"
           label="JBS_CMN_FILTERS_LOCATIONS"
           description="JBS_CMN_FILTERS_LOCATIONS_DESC">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </param>
    </params>
	</state>
     <fields name="request">
        <fieldset name="request">
            <field name="templatemenuid" type="sql"
                description="JBS_MNU_SELECT_TEMPLATE_DESC"
                label="JBS_MNU_SELECT_TEMPLATE"
                default="1"
                query="SELECT id, title FROM #__bsms_templates WHERE published = 1 ORDER BY text ASC"
                key_field="id"
                value_field="title"
                required="true"
            />
        </fieldset>
     </fields>
     <fields name="params">
     <fieldset name="basic" 
     label="JBS_MNU_STUDIES_LIST_LAYOUT" addfieldpath="/administrator/components/com_biblestudy/models/fields" >
     
     <field name="mteacher_id"
           type="teacherlist"
           label="JBS_CMN_FILTERS_TEACHER"
           description="JBS_CMN_FILTERS_TEACHER_DESC"
           multiple="true"
           default="-1"
           >
       <option value="-1">JBS_CMN_SHOW_ALL</option>
    </field>
    <field name="mseries_id"
           type="serieslist"
           multiple="true"
           label="JBS_CMN_FILTERS_SERIES"
           description="JBS_CMN_FILTERS_SERIES_DESC"
           default="-1">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </field>
    <field name="mbooknumber"
           type="bookslist"
           multiple="true"
           label="JBS_CMN_FILTERS_BOOKS"
           description="JBS_CMN_FILTERS_BOOKS_DESC"
           default="-1">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </field>
    <field name="mtopic_id"
           type="topicslist"
           multiple="true"
           size="10"
           label="JBS_CMN_FILTERS_TOPICS"
           description="JBS_CMN_FILTERS_TOPICS_DESC"
           default="-1">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </field>
    <field name="mmessagetype"
           type="messagetypelist"
           multiple="true"
           label="JBS_CMN_FILTERS_MESSAGE_TYPES"
           description="JBS_CMN_FILTERS_MESSAGE_TYPES_DESC"
           default="-1">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </field>
    <field name="mlocations"
           type="locationslist"
           multiple="true"
           label="JBS_CMN_FILTERS_LOCATIONS"
           description="JBS_CMN_FILTERS_LOCATIONS_DESC"
           default="-1">
      <option value="-1">JBS_CMN_SHOW_ALL</option>
    </field>
     
     </fieldset>
     
     </fields>
</metadata>
